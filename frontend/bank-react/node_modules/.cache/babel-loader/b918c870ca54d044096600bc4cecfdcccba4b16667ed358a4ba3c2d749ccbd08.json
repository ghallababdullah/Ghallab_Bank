{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Ghallab_Dev\\\\Ghallab_Bank\\\\frontend\\\\bank-react\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from \"react\";\nimport { apiService } from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const [userData, setUserData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [uploading, setUploading] = useState(false);\n  const [imageLoading, setImageLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [debugInfo, setDebugInfo] = useState('');\n  const fileInputRef = useRef(null);\n\n  // Debug useEffect to track state changes\n  useEffect(() => {\n    console.log('üîÑ UserData updated:', userData);\n    if (userData !== null && userData !== void 0 && userData.profilePictureUrl) {\n      console.log('üì∏ Profile picture URL:', userData.profilePictureUrl);\n      setDebugInfo(`Current image URL: ${userData.profilePictureUrl}`);\n    }\n  }, [userData]);\n  useEffect(() => {\n    console.log('üöÄ Profile component mounted');\n    fetchUserProfile();\n  }, []);\n  const fetchUserProfile = async () => {\n    console.log('üì° Fetching user profile...');\n    setLoading(true);\n    setError('');\n    setDebugInfo('Fetching profile data...');\n    try {\n      const response = await apiService.getMyProfile();\n      console.log('‚úÖ Profile fetch response:', response);\n      if (response.data.statusCode === 200) {\n        setUserData(response.data.data);\n        setDebugInfo(`Profile loaded successfully. Image URL: ${response.data.data.profilePictureUrl || 'No image'}`);\n      } else {\n        setError(response.data.message);\n        setDebugInfo(`Fetch failed: ${response.data.message}`);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('‚ùå Profile fetch error:', error);\n      const errorMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || 'Unknown error';\n      setError(errorMsg);\n      setDebugInfo(`Fetch error: ${errorMsg}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const uploadProfilePictureFile = async file => {\n    console.log('üîº Starting file upload:', file.name, file.size, file.type);\n    setUploading(true);\n    setError('');\n    setSuccess('');\n    setDebugInfo(`Uploading: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB)`);\n    try {\n      // Validate file\n      if (!file.type.startsWith('image/')) {\n        throw new Error('Please select an image file (JPEG, PNG, GIF)');\n      }\n      if (file.size > 5 * 1024 * 1024) {\n        throw new Error('File size should be less than 5MB');\n      }\n      console.log('üì§ Calling upload API...');\n      const response = await apiService.uploadProfilePicture(file);\n      console.log('‚úÖ Upload API response:', response);\n      if (response.data.statusCode === 200) {\n        const newImageUrl = response.data.data;\n        console.log('üéâ Upload successful! New image URL:', newImageUrl);\n        setSuccess('Profile picture updated successfully!');\n        setDebugInfo(`Upload successful! New URL: ${newImageUrl}`);\n\n        // Force refresh the profile data\n        console.log('üîÑ Refreshing profile data...');\n        await fetchUserProfile();\n\n        // Clear success message after 5 seconds\n        setTimeout(() => {\n          setSuccess('');\n        }, 5000);\n      } else {\n        throw new Error(response.data.message || 'Upload failed');\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('‚ùå Upload error:', error);\n      const errorMsg = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || error.message || 'Upload failed';\n      setError(errorMsg);\n      setDebugInfo(`Upload error: ${errorMsg}`);\n    } finally {\n      setUploading(false);\n    }\n  };\n  const handleFileSelect = event => {\n    const file = event.target.files[0];\n    console.log('üìÅ File selected:', file);\n    if (file) {\n      uploadProfilePictureFile(file);\n    } else {\n      setDebugInfo('No file selected');\n    }\n\n    // Reset file input\n    event.target.value = '';\n  };\n  const triggerFileInput = () => {\n    var _fileInputRef$current;\n    console.log('üéØ Triggering file input');\n    (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n  };\n  const handleImageLoad = () => {\n    console.log('üñºÔ∏è Image loaded successfully');\n    setImageLoading(false);\n    setDebugInfo(prev => prev + ' | Image loaded in DOM');\n  };\n  const handleImageError = e => {\n    console.error('‚ùå Image failed to load');\n    setImageLoading(false);\n    setDebugInfo(prev => prev + ' | Image failed to load');\n\n    // Fallback to default image\n    e.target.src = '/default-profile.png';\n  };\n  const forceRefreshProfile = () => {\n    console.log('üîÅ Manually refreshing profile...');\n    fetchUserProfile();\n  };\n  const testImageUrl = () => {\n    if (userData !== null && userData !== void 0 && userData.profilePictureUrl) {\n      console.log('üß™ Testing image URL in new tab:', userData.profilePictureUrl);\n      window.open(userData.profilePictureUrl, '_blank');\n    }\n  };\n\n  // Loading state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Loading your profile information...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-info\",\n        style: {\n          background: '#f0f0f0',\n          padding: '10px',\n          margin: '10px 0',\n          fontSize: '12px'\n        },\n        children: debugInfo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }, this);\n  }\n\n  // Error state\n  if (error && !userData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchUserProfile,\n        className: \"btn btn-primary\",\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"debug-info\",\n        style: {\n          background: '#f0f0f0',\n          padding: '10px',\n          margin: '10px 0',\n          fontSize: '12px'\n        },\n        children: debugInfo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"debug-panel\",\n      style: {\n        background: '#2d3748',\n        color: 'white',\n        padding: '10px',\n        margin: '10px 0',\n        borderRadius: '5px',\n        fontSize: '12px',\n        fontFamily: 'monospace'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"\\uD83D\\uDC1B Debug Info:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: debugInfo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '5px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: forceRefreshProfile,\n          className: \"btn btn-sm\",\n          style: {\n            background: '#4a5568',\n            color: 'white',\n            marginRight: '5px'\n          },\n          children: \"Refresh Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: testImageUrl,\n          disabled: !(userData !== null && userData !== void 0 && userData.profilePictureUrl),\n          className: \"btn btn-sm\",\n          style: {\n            background: '#4a5568',\n            color: 'white'\n          },\n          children: \"Test Image URL\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"My Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/update-profile\",\n        className: \"btn btn-primary\",\n        children: \"Change Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [error, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(''),\n        style: {\n          marginLeft: '10px'\n        },\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"success-message\",\n      children: [success, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSuccess(''),\n        style: {\n          marginLeft: '10px'\n        },\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-picture-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Profile Picture\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-picture-upload\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"profile-picture\",\n            children: [imageLoading && (userData === null || userData === void 0 ? void 0 : userData.profilePictureUrl) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-loading\",\n              children: \"Loading image...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: userData !== null && userData !== void 0 && userData.profilePictureUrl ? `${userData.profilePictureUrl}?t=${new Date().getTime()}` : '/default-profile.png',\n              alt: \"Profile\",\n              onLoad: handleImageLoad,\n              onError: handleImageError,\n              style: {\n                display: imageLoading && userData !== null && userData !== void 0 && userData.profilePictureUrl ? 'none' : 'block'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 29\n            }, this), !(userData !== null && userData !== void 0 && userData.profilePictureUrl) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-image\",\n              children: \"No profile picture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"upload-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              ref: fileInputRef,\n              onChange: handleFileSelect,\n              accept: \"image/*\",\n              style: {\n                display: 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: triggerFileInput,\n              className: \"btn btn-primary\",\n              disabled: uploading,\n              children: uploading ? 'üì§ Uploading...' : 'üñºÔ∏è Change Picture'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: '10px',\n                fontSize: '12px'\n              },\n              children: [\"Status: \", uploading ? 'Uploading...' : 'Ready']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"upload-note\",\n            children: \"Supported formats: JPG, PNG, GIF. Max size: 5MB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Personal Information\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"info-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"First Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: (userData === null || userData === void 0 ? void 0 : userData.firstname) || 'Not available'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Last Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: (userData === null || userData === void 0 ? void 0 : userData.lastname) || 'Not available'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: (userData === null || userData === void 0 ? void 0 : userData.email) || 'Not available'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Phone Number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: (userData === null || userData === void 0 ? void 0 : userData.phoneNumber) || 'Not available'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"info-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: userData !== null && userData !== void 0 && userData.active ? 'status active' : 'status inactive',\n              children: userData !== null && userData !== void 0 && userData.active ? 'ACTIVE' : 'INACTIVE'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"accounts-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"My Accounts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 21\n        }, this), userData !== null && userData !== void 0 && userData.accounts && userData.accounts.length > 0 ? userData.accounts.map(account => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"account-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"account-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [account.accountType, \" Account\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `status ${account.accountStatus.toLowerCase()}`,\n              children: account.accountStatus\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"account-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"account-number\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Account Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: account.accountNumber\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"account-balance\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Balance\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [account.currency, \" \", account.balance.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"account-created\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Created On\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: new Date(account.createdAt).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 33\n          }, this)]\n        }, account.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 29\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No accounts found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 9\n  }, this);\n};\n_s(Profile, \"n1daLNLbAHXdJQPabMnd6TGXASs=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["useState","useEffect","useRef","apiService","jsxDEV","_jsxDEV","Profile","_s","userData","setUserData","loading","setLoading","uploading","setUploading","imageLoading","setImageLoading","error","setError","success","setSuccess","debugInfo","setDebugInfo","fileInputRef","console","log","profilePictureUrl","fetchUserProfile","response","getMyProfile","data","statusCode","message","_error$response","_error$response$data","errorMsg","uploadProfilePictureFile","file","name","size","type","toFixed","startsWith","Error","uploadProfilePicture","newImageUrl","setTimeout","_error$response2","_error$response2$data","handleFileSelect","event","target","files","value","triggerFileInput","_fileInputRef$current","current","click","handleImageLoad","prev","handleImageError","e","src","forceRefreshProfile","testImageUrl","window","open","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","background","padding","margin","fontSize","onClick","color","borderRadius","fontFamily","marginTop","marginRight","disabled","href","marginLeft","Date","getTime","alt","onLoad","onError","display","ref","onChange","accept","firstname","lastname","email","phoneNumber","active","accounts","length","map","account","accountType","accountStatus","toLowerCase","accountNumber","currency","balance","createdAt","toLocaleDateString","id","_c","$RefreshReg$"],"sources":["C:/Users/User/Desktop/Ghallab_Dev/Ghallab_Bank/frontend/bank-react/src/pages/Profile.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport { apiService } from \"../services/api\";\n\nconst Profile = () => {\n    const [userData, setUserData] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [uploading, setUploading] = useState(false);\n    const [imageLoading, setImageLoading] = useState(true);\n    const [error, setError] = useState('');\n    const [success, setSuccess] = useState('');\n    const [debugInfo, setDebugInfo] = useState('');\n    const fileInputRef = useRef(null);\n\n    // Debug useEffect to track state changes\n    useEffect(() => {\n        console.log('üîÑ UserData updated:', userData);\n        if (userData?.profilePictureUrl) {\n            console.log('üì∏ Profile picture URL:', userData.profilePictureUrl);\n            setDebugInfo(`Current image URL: ${userData.profilePictureUrl}`);\n        }\n    }, [userData]);\n\n    useEffect(() => {\n        console.log('üöÄ Profile component mounted');\n        fetchUserProfile();\n    }, []);\n\n    const fetchUserProfile = async () => {\n        console.log('üì° Fetching user profile...');\n        setLoading(true);\n        setError('');\n        setDebugInfo('Fetching profile data...');\n\n        try {\n            const response = await apiService.getMyProfile();\n            console.log('‚úÖ Profile fetch response:', response);\n\n            if (response.data.statusCode === 200) {\n                setUserData(response.data.data);\n                setDebugInfo(`Profile loaded successfully. Image URL: ${response.data.data.profilePictureUrl || 'No image'}`);\n            } else {\n                setError(response.data.message);\n                setDebugInfo(`Fetch failed: ${response.data.message}`);\n            }\n\n        } catch (error) {\n            console.error('‚ùå Profile fetch error:', error);\n            const errorMsg = error.response?.data?.message || error.message || 'Unknown error';\n            setError(errorMsg);\n            setDebugInfo(`Fetch error: ${errorMsg}`);\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    const uploadProfilePictureFile = async (file) => {\n        console.log('üîº Starting file upload:', file.name, file.size, file.type);\n        setUploading(true);\n        setError('');\n        setSuccess('');\n        setDebugInfo(`Uploading: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)}MB)`);\n\n        try {\n            // Validate file\n            if (!file.type.startsWith('image/')) {\n                throw new Error('Please select an image file (JPEG, PNG, GIF)');\n            }\n\n            if (file.size > 5 * 1024 * 1024) {\n                throw new Error('File size should be less than 5MB');\n            }\n\n            console.log('üì§ Calling upload API...');\n            const response = await apiService.uploadProfilePicture(file);\n            console.log('‚úÖ Upload API response:', response);\n\n            if (response.data.statusCode === 200) {\n                const newImageUrl = response.data.data;\n                console.log('üéâ Upload successful! New image URL:', newImageUrl);\n                \n                setSuccess('Profile picture updated successfully!');\n                setDebugInfo(`Upload successful! New URL: ${newImageUrl}`);\n                \n                // Force refresh the profile data\n                console.log('üîÑ Refreshing profile data...');\n                await fetchUserProfile();\n                \n                // Clear success message after 5 seconds\n                setTimeout(() => {\n                    setSuccess('');\n                }, 5000);\n\n            } else {\n                throw new Error(response.data.message || 'Upload failed');\n            }\n\n        } catch (error) {\n            console.error('‚ùå Upload error:', error);\n            const errorMsg = error.response?.data?.message || error.message || 'Upload failed';\n            setError(errorMsg);\n            setDebugInfo(`Upload error: ${errorMsg}`);\n        } finally {\n            setUploading(false);\n        }\n    }\n\n    const handleFileSelect = (event) => {\n        const file = event.target.files[0];\n        console.log('üìÅ File selected:', file);\n        \n        if (file) {\n            uploadProfilePictureFile(file);\n        } else {\n            setDebugInfo('No file selected');\n        }\n        \n        // Reset file input\n        event.target.value = '';\n    }\n\n    const triggerFileInput = () => {\n        console.log('üéØ Triggering file input');\n        fileInputRef.current?.click();\n    };\n\n    const handleImageLoad = () => {\n        console.log('üñºÔ∏è Image loaded successfully');\n        setImageLoading(false);\n        setDebugInfo(prev => prev + ' | Image loaded in DOM');\n    }\n\n    const handleImageError = (e) => {\n        console.error('‚ùå Image failed to load');\n        setImageLoading(false);\n        setDebugInfo(prev => prev + ' | Image failed to load');\n        \n        // Fallback to default image\n        e.target.src = '/default-profile.png';\n    }\n\n    const forceRefreshProfile = () => {\n        console.log('üîÅ Manually refreshing profile...');\n        fetchUserProfile();\n    }\n\n    const testImageUrl = () => {\n        if (userData?.profilePictureUrl) {\n            console.log('üß™ Testing image URL in new tab:', userData.profilePictureUrl);\n            window.open(userData.profilePictureUrl, '_blank');\n        }\n    }\n\n    // Loading state\n    if (loading) {\n        return (\n            <div className=\"profile-container\">\n                <div className=\"loading\">Loading your profile information...</div>\n                <div className=\"debug-info\" style={{background: '#f0f0f0', padding: '10px', margin: '10px 0', fontSize: '12px'}}>\n                    {debugInfo}\n                </div>\n            </div>\n        );\n    }\n\n    // Error state\n    if (error && !userData) {\n        return (\n            <div className=\"profile-container\">\n                <div className=\"error-message\">{error}</div>\n                <button onClick={fetchUserProfile} className=\"btn btn-primary\">Retry</button>\n                <div className=\"debug-info\" style={{background: '#f0f0f0', padding: '10px', margin: '10px 0', fontSize: '12px'}}>\n                    {debugInfo}\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"profile-container\">\n            {/* Debug Panel */}\n            <div className=\"debug-panel\" style={{\n                background: '#2d3748',\n                color: 'white',\n                padding: '10px',\n                margin: '10px 0',\n                borderRadius: '5px',\n                fontSize: '12px',\n                fontFamily: 'monospace'\n            }}>\n                <strong>üêõ Debug Info:</strong>\n                <div>{debugInfo}</div>\n                <div style={{ marginTop: '5px' }}>\n                    <button \n                        onClick={forceRefreshProfile}\n                        className=\"btn btn-sm\"\n                        style={{background: '#4a5568', color: 'white', marginRight: '5px'}}\n                    >\n                        Refresh Data\n                    </button>\n                    <button \n                        onClick={testImageUrl}\n                        disabled={!userData?.profilePictureUrl}\n                        className=\"btn btn-sm\"\n                        style={{background: '#4a5568', color: 'white'}}\n                    >\n                        Test Image URL\n                    </button>\n                </div>\n            </div>\n\n            <div className=\"profile-header\">\n                <h1>My Profile</h1>\n                <a href=\"/update-profile\" className=\"btn btn-primary\">Change Password</a>\n            </div>\n\n            {error && (\n                <div className=\"error-message\">\n                    {error}\n                    <button onClick={() => setError('')} style={{marginLeft: '10px'}}>√ó</button>\n                </div>\n            )}\n            \n            {success && (\n                <div className=\"success-message\">\n                    {success}\n                    <button onClick={() => setSuccess('')} style={{marginLeft: '10px'}}>√ó</button>\n                </div>\n            )}\n\n            <div className=\"profile-content\">\n                <div className=\"profile-picture-section\">\n                    <h2>Profile Picture</h2>\n                    <div className=\"profile-picture-upload\">\n                        <div className=\"profile-picture\">\n                            {imageLoading && userData?.profilePictureUrl && (\n                                <div className=\"image-loading\">Loading image...</div>\n                            )}\n                            <img\n                                src={userData?.profilePictureUrl ? `${userData.profilePictureUrl}?t=${new Date().getTime()}` : '/default-profile.png'}\n                                alt=\"Profile\"\n                                onLoad={handleImageLoad}\n                                onError={handleImageError}\n                                style={{ display: imageLoading && userData?.profilePictureUrl ? 'none' : 'block' }}\n                            />\n                            {!userData?.profilePictureUrl && (\n                                <div className=\"no-image\">No profile picture</div>\n                            )}\n                        </div>\n\n                        <div className=\"upload-controls\">\n                            <input\n                                type=\"file\"\n                                ref={fileInputRef}\n                                onChange={handleFileSelect}\n                                accept=\"image/*\"\n                                style={{ display: 'none' }}\n                            />\n\n                            <button\n                                onClick={triggerFileInput}\n                                className=\"btn btn-primary\"\n                                disabled={uploading}\n                            >\n                                {uploading ? 'üì§ Uploading...' : 'üñºÔ∏è Change Picture'}\n                            </button>\n\n                            <div style={{ marginTop: '10px', fontSize: '12px' }}>\n                                Status: {uploading ? 'Uploading...' : 'Ready'}\n                            </div>\n                        </div>\n\n                        <p className=\"upload-note\">\n                            Supported formats: JPG, PNG, GIF. Max size: 5MB\n                        </p>\n                    </div>\n                </div>\n\n                <div className=\"profile-info\">\n                    <h2>Personal Information</h2>\n                    <div className=\"info-grid\">\n                        <div className=\"info-item\">\n                            <label>First Name</label>\n                            <p>{userData?.firstname || 'Not available'}</p>\n                        </div>\n                        <div className=\"info-item\">\n                            <label>Last Name</label>\n                            <p>{userData?.lastname || 'Not available'}</p>\n                        </div>\n                        <div className=\"info-item\">\n                            <label>Email</label>\n                            <p>{userData?.email || 'Not available'}</p>\n                        </div>\n                        <div className=\"info-item\">\n                            <label>Phone Number</label>\n                            <p>{userData?.phoneNumber || 'Not available'}</p>\n                        </div>\n                        <div className=\"info-item\">\n                            <label>Status</label>\n                            <p className={userData?.active ? 'status active' : 'status inactive'}>\n                                {userData?.active ? 'ACTIVE' : 'INACTIVE'}\n                            </p>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Accounts section remains the same */}\n                <div className=\"accounts-section\">\n                    <h2>My Accounts</h2>\n                    {userData?.accounts && userData.accounts.length > 0 ? (\n                        userData.accounts.map(account => (\n                            <div key={account.id} className=\"account-card\">\n                                <div className=\"account-header\">\n                                    <h3>{account.accountType} Account</h3>\n                                    <span className={`status ${account.accountStatus.toLowerCase()}`}>\n                                        {account.accountStatus}\n                                    </span>\n                                </div>\n                                <div className=\"account-details\">\n                                    <div className=\"account-number\">\n                                        <label>Account Number</label>\n                                        <p>{account.accountNumber}</p>\n                                    </div>\n                                    <div className=\"account-balance\">\n                                        <label>Balance</label>\n                                        <p>{account.currency} {account.balance.toFixed(2)}</p>\n                                    </div>\n                                    <div className=\"account-created\">\n                                        <label>Created On</label>\n                                        <p>{new Date(account.createdAt).toLocaleDateString()}</p>\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    ) : (\n                        <p>No accounts found</p>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}